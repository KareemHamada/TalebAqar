@model IEnumerable<UserVM>

@{
	ViewData["Title"] = "Index";
	Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
}

<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
	<!-- Main content -->
	<section class="content">

		<div class="card">
			@if (Model.Any())
			{
				<div class="card-header">
					<h3 class="f-right">كل المستخدمين</h3>
				</div>
				<!-- /.card-header -->
				<div class="card-body">
					<table id="example1" class="table table-bordered table-striped">
						<thead>
							<tr>
								<td>الاسم الاول</td>
								<td>الاسم الاخير</td>
								<td>الاسم كامل</td>
								<td>الاميل</td>
								<td>الصلاحية</td>
								<td></td>
								<td></td>
								<td></td>

							</tr>
						</thead>
						<tbody>
							@foreach (var item in Model)
							{
								<tr>
									<td>@item.FirstName</td>
									<td>@item.LastName</td>
									<td>@item.UserName</td>
									<td>@(item.Email ?? "No email available")</td>
									<td>
										@if (item.Roles != null && item.Roles.Any())
										{
											@string.Join(",", item.Roles)
										}
										else
										{
											<text>لا يوجد صلاحيات لهذا المستخدم</text>
										}
									</td>


									<partial name="_ButtonsPartial" model="@item.Id.ToString()"></partial>


								</tr>
							}

						</tbody>
						<tfoot>
							<tr>
								<td>الاسم الاول</td>
								<td>الاسم الاخير</td>
								<td>الاسم كامل</td>
								<td>الاميل</td>
								<td>الصلاحية</td>
								<td></td>
								<td></td>
								<td></td>

							</tr>
						</tfoot>
					</table>
				</div>
				<!-- /.card-body -->
			}
			else
			{
				<div class="card-header">
					<h3 class="text-danger f-right">لا يوجد مستخدمين</h3>
				</div>
			}


		</div>
		<!-- /.card -->

	</section>
	<!-- /.content -->
</div>
<!-- /.content-wrapper -->
@section Scripts {
	<!-- DataTables -->
	<script src="~/Admin/plugins/datatables/jquery.dataTables.js"></script>
	<script src="~/Admin/plugins/datatables-bs4/js/dataTables.bootstrap4.js"></script>

	<!-- DataTables  & Plugins -->
	<script src="~/Admin/plugins/datatables/jquery.dataTables.min.js"></script>
	<script src="~/Admin/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
	<script src="~/Admin/plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>
	<script src="~/Admin/plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>
	<script src="~/Admin/plugins/datatables-buttons/js/dataTables.buttons.min.js"></script>
	<script src="~/Admin/plugins/datatables-buttons/js/buttons.bootstrap4.min.js"></script>
	<script src="~/Admin/plugins/jszip/jszip.min.js"></script>
	<script src="~/Admin/plugins/pdfmake/pdfmake.min.js"></script>
	<script src="~/Admin/plugins/pdfmake/vfs_fonts.js"></script>
	<script src="~/Admin/plugins/datatables-buttons/js/buttons.html5.min.js"></script>
	<script src="~/Admin/plugins/datatables-buttons/js/buttons.print.min.js"></script>
	<script src="~/Admin/plugins/datatables-buttons/js/buttons.colVis.min.js"></script>


	<!-- Page specific script -->
	<script>
		$(function () {
			$("#example1").DataTable({
				"responsive": true, "lengthChange": false, "autoWidth": false,
				"buttons": ["copy", "excel", "colvis"]
			}).buttons().container().appendTo('#example1_wrapper .col-md-6:eq(0)');
		});
	</script>

}


